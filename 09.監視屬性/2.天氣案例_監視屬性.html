<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>天氣案例_監視屬性</title>
    <script type="text/javascript" src="../js/vue.js"></script>
</head>
<body>
    <!--
      監視屬性watch:
        1.當被監視的屬性變化時，回調函數自動調用，進行相關操作
        2.監視的屬性必須存在，才能進行監視
        3.監視的兩種寫法
          (1)new Vue時傳入watch配置
          (2)通過vm.$watch監視
    -->
    <div id="root">
      <h2>今天天氣{{info}}</h2>
      <button @click="changeWeather">切換天氣</button>
    </div>
    <script type="text/javascript">
        const vm = new Vue({
          el: "#root",  
          data: {
            isHot: true,
          },
          computed: {
            info(){
              return this.isHot ? '很熱' : '涼涼'
            }
          },
          methods: {
            changeWeather(){
              this.isHot = !this.isHot
            }
          },
          // 監視方法一: watch
          // watch: {
          //   isHot: {
          //     // 初始化時，讓handler調用
          //     immediate: false,
          //     // handler 甚麼時候調用? 當isHot發生改變時
          //     handler(newValue, oldValue){
          //       console.log('isHot 修改', newValue, oldValue);
          //     }
          //   },
          //   // 一般屬性isHot可以監視，計算屬性info也可以監視
          //   info:{
          //     handler:(newValue,oldValue){
          //       console.log('info 修改', newValue, oldValue);
          //     }
          //   }
          // }
        })

        // 監視方法二:vm身上的watch
        vm.$watch('isHot', {
          immediate: false,
          handler(newValue, oldValue){
            console.log('isHot 修改', newValue, oldValue);
          }
        })
    </script>
</body>
</html>